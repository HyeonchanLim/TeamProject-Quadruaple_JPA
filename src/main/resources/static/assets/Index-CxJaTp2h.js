import{g,r as c,c as f,j as e,d as j,ae as u,m,aF as N,aa as b}from"./index-CclgMCKg.js";import{B as y}from"./BottomSheet-nkPRIX3f.js";import{a as v}from"./index-317k7Gzh.js";import{N as S}from"./NoData-CVZyKg5f.js";import{P}from"./index-_-w7L-mv.js";import{S as k}from"./index-DzJzb7gE.js";import"./proxy-luPhEEJa.js";import"./index-DK5P-bAW.js";import"./motion-BtiDeT7c.js";import"./index-CSlYUxik.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./roundedArrow-S-OOpRVx.js";import"./zoom-BWmeO6-E.js";const A=({item:t,getPointList:s})=>{console.log(t);const d=g("accessToken"),[i,a]=c.useState(!1),[x]=f(),r=x.get("strfId"),l=async()=>{const n="/api/point/history";try{const h=(await m.delete(`${n}`,{data:{point_history_id:t.pointHistoryId,strf_id:r},headers:{Authorization:`Bearer ${d}`}})).data;h.code=="200 성공"&&(a(!1),s()),console.log("포인트 환불",h)}catch(p){console.log("포인트 환불",p)}},o=[{label:e.jsxs("button",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(v,{}),"환불하기"]}),onClick:()=>{l()}}];return e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex flex-col gap-2 py-5 border-b border-slate-100",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"거래 일시"}),e.jsx("p",{className:"col-span-2 text-slate-600 text-lg",children:j(t.createdAt).format("YYYY-MM-DD HH:mm:ss")}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"text-slate-500 text-xl",onClick:()=>a(!0),children:e.jsx(u,{})})})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"거래 구분"}),e.jsx("p",{className:`col-span-3 text-base px-2 rounded-sm w-fit flex items-center justify-center
            ${t.refund?"bg-[rgba(253,180,161,0.3)] text-secondary3":"bg-[rgba(165,238,254,0.3)] text-primary"}`,children:t.refund?"환불":"결제"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"내역"}),e.jsx("p",{className:"col-span-3 text-slate-600 text-lg",children:t.title})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center",children:[e.jsx("h5",{className:"col-span-1 text-slate-700 font-semibold text-lg",children:"결제 금액"}),e.jsxs("p",{className:"col-span-3 text-slate-600 text-lg",children:[t.amount.toLocaleString(),"원"]})]})]}),e.jsx(y,{open:i,onClose:()=>a(!1),actions:o})]})},F=()=>{const t=g("accessToken"),[s,d]=c.useState();c.useEffect(()=>{console.log("pointData",s)},[s]);const[i,a]=c.useState(!1),x=async()=>{var l;const r="/api/business/my-page/used-point";a(!0);try{const n=(await m.get(r,{headers:{Authorization:`Bearer ${t}`}})).data;return console.log("포인트 조회",n),d(n),n}catch(o){return m.isAxiosError(o)&&console.log("포인트 조회 오류",(l=o.response)==null?void 0:l.data),null}finally{a(!1)}};return c.useEffect(()=>{x()},[]),e.jsxs("div",{children:[e.jsxs("section",{className:"flex flex-col gap-2 px-4 py-5 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 ",children:[e.jsx("h3",{className:"text-2xl font-semibold text-slate-700",children:"사용된 포인트"}),e.jsx(P,{placement:"left",content:"결제된 포인트의 합계입니다. (환불된 포인트는 집계되지 않습니다)",trigger:"hover",children:e.jsx("span",{children:e.jsx(N,{className:"text-lg text-slate-300 cursor-help"})})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-4xl text-primary",children:[(s==null?void 0:s.totalAmount.toLocaleString())??"0","원"]})}),e.jsx("div",{children:e.jsxs("p",{className:"bg-slate-100 rounded-lg p-5 text-sm text-slate-500",children:["포인트 결제가 잘못되었을 경우, 포인트 결제일부터"," ",e.jsx("span",{className:"text-primary",children:"1일 이내"})," 환불, 변경 가능합니다."]})})]}),e.jsx("section",{className:"px-4",children:e.jsx(k,{spinning:i,children:e.jsxs("ul",{className:"py-5",children:[s==null?void 0:s.pointDetails.map((r,l)=>e.jsx(A,{item:r,getPointList:x},l)),!i&&(s==null?void 0:s.pointDetails.length)===0&&e.jsx(S,{icon:e.jsx(b,{}),content:"포인트 결제 내역이 없습니다"})]})})})]})};export{F as default};
