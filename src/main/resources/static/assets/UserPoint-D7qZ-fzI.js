import{r as a,d,j as e,B as C,u as M,b as P,L as $,ao as I}from"./index-CclgMCKg.js";import{j as E}from"./jwt-Be9xYbvd.js";/* empty css                    */import{m as S}from"./proxy-luPhEEJa.js";import{D as L}from"./index-C8fV_4ml.js";import{F as R}from"./Footer--G79VcmM.js";import"./customParseFormat--lJaNAof.js";import"./PurePanel-C1JE1xpr.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-b40CqTdl.js";import"./useIcons-Bg9STVks.js";import"./CheckOutlined-C_iRVmUt.js";import"./DownOutlined-eQ1uAPVl.js";import"./roundedArrow-S-OOpRVx.js";import"./useLocale-drylJvgs.js";const{RangePicker:A}=L,H=({open:i,onClose:n,onSelect:l})=>{const[r,h]=a.useState(1),[x,c]=a.useState("latest"),[m,p]=a.useState([d().subtract(1,"month"),d()]),g="YYYY/MM/DD";if(a.useEffect(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[i]),!i)return null;const u=s=>{h(s)},y=()=>{let s,o,f;r==="direct"?(s=m[0].format("YYYY-MM-DD"),o=m[1].format("YYYY-MM-DD"),f="직접입력"):(s=d().subtract(r,"month").format("YYYY-MM-DD"),o=d().format("YYYY-MM-DD"),f=`${r}개월`),l(s,o,x==="latest",f),n()};return e.jsx("div",{children:e.jsx(S.div,{tabIndex:-1,className:"max-w-[768px] w-full left-1/2 -translate-x-1/2 fixed inset-0 bg-black/50 flex justify-center items-end z-50 overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(),children:e.jsxs(S.div,{className:" bg-white w-full rounded-t-3xl py-5 shadow-lg",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:100},dragElastic:.2,onDragEnd:(s,o)=>{o.offset.y>100&&n()},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"w-12 h-1 bg-slate-400 rounded-full mx-auto mb-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 px-4 py-4",children:"조회기간"}),e.jsxs("div",{className:"w-full flex justify-center px-4",children:[[1,3,6,12].map(s=>e.jsxs("button",{onClick:()=>u(s),className:`w-1/5 py-3 text-slate-400 border border-slate-200 border-l-0 first:border-l las text-sm 
                    ${r===s?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:[s,"개월"]},s)),e.jsx("button",{onClick:()=>u("direct"),className:`w-1/5 py-3 text-slate-400 border border-slate-200 border-l-0 text-sm 
                  ${r==="direct"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"직접입력"})]}),r==="direct"&&e.jsx("div",{className:"px-4 mt-4",children:e.jsx(A,{value:m,onChange:s=>{s&&p([s[0],s[1]])},format:g,className:"custom-date-picker w-full py-3 rounded-none"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 px-4 py-4",children:"정렬선택"}),e.jsxs("div",{className:"flex justify-center px-4",children:[e.jsx("button",{onClick:()=>c("latest"),className:`w-1/2 py-3 text-slate-400 border border-slate-200 border-l-0 first:border-l text-sm
                  ${x==="latest"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"최신순"}),e.jsx("button",{onClick:()=>c("oldest"),className:`w-1/2 py-3 text-slate-400 border border-slate-200 border-l-0 text-sm
                  ${x==="oldest"?"bg-white !border-slate-400 !border text-slate-700":"bg-slate-50"}`,children:"과거순"})]})]}),e.jsx("div",{className:"px-4 mt-6",children:e.jsx(C,{type:"primary",className:"text-base h-auto py-3 w-full",onClick:y,children:"조회하기"})})]})})})},se=()=>{const[i,n]=a.useState(!1),[l,r]=a.useState(),h=a.useRef(null),x=M(),[c,m]=a.useState(d().subtract(1,"month").format("YYYY-MM-DD")),[p,g]=a.useState(d().format("YYYY-MM-DD")),[u,y]=a.useState(!0),[s,o]=a.useState("1개월"),[f,N]=a.useState("최신순"),D=async()=>{try{const t=await E.get(`/api/point/history?start_at=${c}&end_at=${p}&is_desc=${u}`);r(t.data.data),console.log("✅  pointHis  res:",t.data.data)}catch(t){console.log("✅  pointHis  error:",t)}};a.useEffect(()=>{D()},[]),a.useEffect(()=>{c&&p&&D()},[c,p,u]);const v=(t,j,b,w)=>{m(t),g(j),y(b),w&&o(w),N(b?"최신순":"과거순")},Y=()=>{var t;(t=h.current)==null||t.click()},k=t=>{var b;const j=(b=t.target.files)==null?void 0:b[0];j&&alert(`이미지 선택됨: ${j.name}`)};return e.jsxs("div",{children:[e.jsx(P,{icon:"back",title:"포인트",onClick:()=>x("/user/index")}),e.jsxs("div",{children:[e.jsxs("div",{className:"mx-4 my-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base text-slate-500 mb-[6px]",children:[l==null?void 0:l.userName,"님의"," ",e.jsx("span",{className:"text-primary",children:"보유 포인트"})]}),e.jsxs("h1",{className:"text-4xl font-bold text-slate-700",children:[l==null?void 0:l.remainPoint.toLocaleString(),e.jsx("span",{className:"font-light text-slate-500 ml-3",children:"P"})]})]}),e.jsxs("div",{className:"flex py-6 border-[1px] border-slate-200 rounded-lg mt-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 items-center gap-[6px] border-r-[1px] border-slate-100 cursor-pointer",onClick:Y,children:[e.jsx("img",{src:"/images/icon/IoQrCode.svg",alt:"IoQrCode",className:"w-6 aspect-square"}),e.jsx("p",{className:"text-sm text-slate-700",children:"QR/스마트 결제"})]}),e.jsx("input",{ref:h,type:"file",accept:"image/*",capture:"environment",style:{display:"none"},onChange:k}),e.jsxs($,{to:"payment",className:"flex flex-col flex-1 items-center gap-[6px] cursor-pointer",children:[e.jsx("img",{src:"/images/icon/AiOutlinePlusCircle.svg",alt:"AiOutlinePlusCircle",className:"w-6 aspect-square"}),e.jsx("p",{className:"text-sm text-slate-700",children:"포인트 충전"})]})]})]}),e.jsxs("ul",{className:"px-4",children:[e.jsxs("li",{className:"flex justify-between py-4 ",children:[e.jsx("p",{className:"text-base text-slate-700 font-semibold",children:"적립/사용내역"}),e.jsxs("button",{onClick:()=>n(!i),className:"flex items-center gap-[6px] text-sm text-slate-500",children:[s," · ",f,e.jsx(I,{className:"text-slate-400 text-sm"})]})]}),l==null?void 0:l.pointList.map(t=>e.jsxs("li",{className:"flex justify-between py-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-700 text-base mb-[2px]",children:t.usedAt}),e.jsx("p",{className:"text-slate-400 text-sm tracking-tight",children:t.addedAt})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-lg font-semibold mb-[2px] ${[1,4].includes(t.category)?"text-primary":"text-slate-700"}`,children:[1,4].includes(t.category)?`+${t.amount.toLocaleString()}P`:`${t.amount.toLocaleString()}P`}),e.jsxs("p",{className:"text-slate-400 text-sm text-right",children:[t.remainPoint.toLocaleString(),"P"]})]})]},t.pointHistoryId))]})]}),e.jsx(H,{open:i,onClose:()=>n(!1),onSelect:v}),e.jsx(R,{})]})};export{se as default};
