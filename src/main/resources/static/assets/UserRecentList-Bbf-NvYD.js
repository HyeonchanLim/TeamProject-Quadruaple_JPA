import{M as R,i as A,r as a,g as T,u as S,j as t,T as $,a0 as B,ad as E,a6 as L,B as p,m as c}from"./index-CclgMCKg.js";import{L as M}from"./index-DK5P-bAW.js";import{F as O}from"./Footer--G79VcmM.js";/* empty css                    */import{j as P}from"./jwt-Be9xYbvd.js";import{R as U}from"./index-coMdXwgz.js";import{M as z}from"./index-Dc0vd-op.js";import"./index-CSlYUxik.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./motion-BtiDeT7c.js";import"./roundedArrow-S-OOpRVx.js";import"./zoom-BWmeO6-E.js";import"./index-DF8UPMmw.js";import"./index-BbTjQyva.js";import"./fade-BjX83sUK.js";import"./context-BaOhzo3B.js";import"./Skeleton-B7Q4exgZ.js";import"./useLocale-drylJvgs.js";import"./PurePanel-C1JE1xpr.js";const de=()=>{const[h,F]=R(A),[H,u]=a.useState([]),[o,g]=a.useState([]),[d,j]=a.useState(0),[N,n]=a.useState(!1),r=T("accessToken"),w=async()=>{try{const e=await c.get("/api/user/userInfo",{headers:{Authorization:`Bearer ${r}`}});u(e.data.data)}catch(e){console.log(e)}};console.log("isRecents",o);const i=async()=>{try{const e=await c.get("/api/recent/list",{headers:{Authorization:`Bearer ${r}`}});g(e.data.data),console.log("✅  isRecents:",e.data.data)}catch(e){console.log("✅  error:",e)}},b=async()=>{try{const e=await c.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${r}`}});i()}catch(e){console.log("✅  error:",e)}},v=async e=>{console.log("isRecents.strfId",e.strfId,r);const l={strf_id:e.strfId};try{const s=await c.patch(`/api/recent/hide?strf_id=${e.strfId}`,{...l},{headers:{Authorization:`Bearer ${r}`}});console.log("숨기기 결과",s.data),i()}catch(s){console.log("✅  error:",s)}},y=async()=>{try{const e=await P.get("/api/recent/count");j(e.data)}catch(e){console.log("error",e)}};a.useEffect(()=>{h.accessToken&&w()},[]),a.useEffect(()=>{i(),y()},[]);const I=()=>n(!0),x=()=>{b(),n(!1)},m=()=>n(!1),k={TOUR:"관광지",FEST:"축제",STAY:"숙소",RESTAUR:"맛집"},f=S();return console.log(" count",d),t.jsxs("div",{children:[t.jsx($,{icon:"back",title:"최근 본 목록",onClick:()=>{f(-1)}}),o.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx(M,{className:"w-full text-slate-300 text-8xl mb-5 "}),t.jsx("p",{className:"text-2xl text-slate-400 font-semibold",children:"최근에 본 목록이 없습니다."})]}):t.jsxs("div",{className:"relative flex flex-col gap-6 px-4 mb-6",children:[t.jsxs("div",{className:"flex justify-between py-[14px] border-b-[1px] border-slate-100 ",children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-700",children:["총 ",d,"개"]}),t.jsx("button",{onClick:I,className:"text-sm font-light text-slate-400",children:"전체 삭제"})]}),o==null?void 0:o.map(e=>{var l,s;return t.jsxs("li",{className:"flex gap-3 items-start cursor-pointer",onClick:()=>f(`/contents/index?strfId=${e.strfId}`),children:[t.jsx("div",{className:"w-32 min-w-32 aspect-square bg-slate-200 rounded-lg overflow-hidden relative",children:t.jsx("img",{src:`${B}/${e.strfId}/${e.strfPic}`,alt:e.title,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex flex-col gap-[5px] mr-auto",children:[t.jsx("div",{className:"flex gap-[5px] items-center ",children:t.jsx("h3",{className:"text-lg font-medium text-slate-700",children:e.strfTitle})}),t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-slate-500",children:[k[e.category]||e.category," ·"," ",e.locationName]})}),t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx(U,{disabled:!0,allowHalf:!0,value:e.ratingAvg,className:"flex items-center custom-star-wish custom-star"}),t.jsxs("p",{className:"text-sm text-slate-500",children:["(",(l=e.reviewCnt)==null?void 0:l.toLocaleString(),")"]})]}),t.jsxs("div",{className:"flex gap-1 items-center text-sm",children:[e.wishIn===1?t.jsx(E,{className:"text-secondary3 text-lg"}):t.jsx(L,{className:"text-slate-400 text-lg"}),t.jsx("p",{className:"text-slate-500",children:(s=e.wishCnt)==null?void 0:s.toLocaleString()})]})]}),t.jsx("button",{onClick:C=>{C.stopPropagation(),v(e)},className:"text-slate-400 text-sm w-9 text-right",children:"삭제"})]},e.strfId)})]}),t.jsx(O,{}),t.jsx(z,{open:N,onOk:x,onCancel:m,closable:!1,footer:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(p,{onClick:m,className:"w-full h-14 border-0 rounded-none shadow-none",children:"취소"},"back"),t.jsx("span",{className:"text-slate-300 font-thin",children:"|"}),t.jsx(p,{onClick:x,className:"w-full h-14 border-none shadow-none",children:"확인"},"submit")]})],children:t.jsx("p",{className:"text-lg text-slate-700 font-semibold text-center py-6",children:"최근 본 목록을 전체 삭제하시겠습니까 ?"})})]})};export{de as default};
