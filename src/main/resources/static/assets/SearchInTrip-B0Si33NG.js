import{u as j,j as e,a0 as A,ad as T,a6 as B,g as P,c as R,r as x,Z as E,I as z,$ as M,B as D,m as y}from"./index-CclgMCKg.js";import{c as F}from"./match-BrbVKEl2.js";import{R as H}from"./index-coMdXwgz.js";import{c as K}from"./search-CYEcxJpF.js";import{S as O}from"./index-DzJzb7gE.js";import"./index-317k7Gzh.js";import"./index-efnQCHqG.js";import"./index-DK5P-bAW.js";import"./index-Dyi5F84X.js";import"./index-CSlYUxik.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./motion-BtiDeT7c.js";import"./roundedArrow-S-OOpRVx.js";import"./zoom-BWmeO6-E.js";const q=({item:s})=>{const l=j(),r=c=>{console.log(c),l(`/contents/index?strfId=${c}`)};return e.jsxs("li",{className:"flex gap-5 items-center cursor-pointer",onClick:()=>{r(s.strfId)},children:[e.jsx("div",{className:"w-32 aspect-square bg-slate-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${A}/${s.strfId}/${s.picTitle}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("div",{className:"flex gap-[5px] items-center ",children:e.jsx("h3",{className:"text-[20px] font-semibold text-slate-700",children:s.title})}),e.jsx("div",{className:"flex gap-[5px] items-center",children:e.jsx("p",{className:"text-[14px] text-slate-500",children:F(s.category)})}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx(H,{disabled:!0,count:1,value:s.ratingIn?1:0,style:{fontSize:"16px"}}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.avgRating}),e.jsxs("p",{className:"text-[12px] text-slate-500",children:["(",s.ratingCnt.toLocaleString(),")"]})]}),e.jsxs("div",{className:"flex gap-[5px] items-center",children:[e.jsx("div",{children:s.wishIn?e.jsx(T,{className:"text-secondary3 text-[16px]"}):e.jsx(B,{className:"text-slate-400 text-[16px]"})}),e.jsx("p",{className:"text-[12px] text-slate-500",children:s.wishCnt.toLocaleString()})]})]})]})},le=()=>{const s=P("accessToken"),[l]=R(),r=Number(l.get("tripId")),c=l.get("category"),h=l.get("keyword"),u=l.get("type"),d=j(),$=()=>{d(-1)},N=t=>{t.type!=="ALL"&&d(`/search/trip?tripId=${r}&category=${t.type}&keyword=${a}&type=search`),t.type==="ALL"&&d(`/search/trip?tripId=${r}&category=${t.type}&keyword=${a}&type=basic`)},[a,v]=x.useState(h==="null"?"":h),[w,p]=x.useState(!1),[n,I]=x.useState(0),[b,g]=x.useState([]),[S,m]=x.useState(!0),k=async()=>{const t="/api/search/strf-list-basic";p(!0);try{const o=(await y.get(`${t}?trip_id=${r}&start_idx=${n}`,{headers:{Authorization:`Bearer ${s}`}})).data;return o.code==="200 성공"&&(g(o.data.list),m(o.data.more)),o}catch(i){return console.log("일정 추가 검색",i),null}finally{p(!1)}},C=async()=>{const t="/api/search/strf-list-word";p(!0);try{const o=(await y.get(c==="ALL"?(a==null?void 0:a.trim())===""?`${t}?trip_id=${r}&start_idx=${n}`:`${t}?trip_id=${r}&start_idx=${n}&search_word=${a}`:(a==null?void 0:a.trim())===""?`${t}?trip_id=${r}&start_idx=${n}&category=${c}`:`${t}?trip_id=${r}&start_idx=${n}&category=${c}&search_word=${a}`,{headers:{Authorization:`Bearer ${s}`}})).data;return o.code==="200 성공"&&(g(o.data.list),m(o.data.more)),o}catch(i){return console.log("일정 추가 검색",i),null}finally{p(!1)}},f=()=>{d(`/search/trip?tripId=${r}&category=${c}&keyword=${a}&type=search`)},L=t=>{console.log(t.type),g([]),N(t)},_=()=>{I(t=>t+10)};return x.useEffect(()=>{u==="basic"&&k(),u==="search"&&C()},[h,c,u,n]),e.jsxs("div",{children:[e.jsxs("section",{className:"w-full px-8 py-7 flex items-center gap-10 relative ",children:[e.jsx("div",{className:"text-3xl cursor-pointer",onClick:$,children:e.jsx(E,{})}),e.jsx(z,{placeholder:"지금 어디로 여행을 떠나고 싶으신가요?",variant:"borderless",suffix:e.jsx("button",{type:"button",onClick:f,children:e.jsx(M,{className:"text-slate-400 text-2xl"})}),allowClear:!0,value:a,onChange:t=>v(t.target.value),onPressEnter:f})]}),e.jsx("section",{children:e.jsx("ul",{className:"flex gap-3 px-7 justify-between items-center",children:K.map((t,i)=>e.jsx("li",{className:`cursor-pointer text-sm w-full flex justify-center items-center py-2 gap-3 rounded-xl 
                    ${t.type===c?"bg-primary text-white":"bg-white text-slate-500"}`,onClick:()=>{L(t)},children:e.jsxs("p",{className:"text-center",children:[" ",t.name]})},i))})}),e.jsxs("section",{children:[e.jsx(O,{spinning:w,children:e.jsx("ul",{className:"px-8 py-7 flex flex-col gap-8",children:b.map((t,i)=>e.jsx(q,{item:t},i))})}),e.jsx("div",{className:"flex justify-center",children:S&&e.jsx(D,{className:"text-slate-500 text-base !h-auto py-2 px-5 border-1 border-slate-200 rounded-full",onClick:_,children:"더보기"})})]})]})};export{le as default};
