import{u as C,r as n,j as e,a1 as v,a8 as I,d as N,ac as S,c as w,g as A,B as $,aD as k,a2 as D,m as E}from"./index-DH-Wz4Mj.js";import"./ko-CNsUf6Fw.js";import{c as B}from"./customParseFormat-CgFv_ry4.js";import{B as P}from"./BottomSheet-DU6y7FlW.js";import{f as y,S as T}from"./StrfInfo-bFBrb7h4.js";import{N as Y}from"./NoData-BXCjAEK8.js";import{S as F}from"./index-C9J3gJiJ.js";import"./proxy-AvwZpyC7.js";import"./index-BynuhZRZ.js";N.locale("ko");N.extend(B);const L=({strfId:f,item:d,selected:i,onClick:h})=>{const{couponId:c,title:s,discountPer:r,expiredAt:l,distributeAt:o}=d,m=C(),p=()=>{m(`/business/coupon/edit?strfId=${f}&couponId=${c}&title=${s}&discountPer=${r}&expiredAt=${l}&distributeAt=${o}`)},[x,j]=n.useState(!1),u=t=>N(t).format("YYYY-MM-DD(ddd)"),b=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(S,{className:"text-slate-300"}),"수정하기"]}),onClick:()=>{p()}}],a=()=>{j(!x)};return e.jsxs("div",{className:"px-2 pt-2 pb-5 flex flex-col gap-3 border-b border-slate-200",children:[e.jsxs("div",{className:"flex flex-col gap-2 relative",children:[e.jsxs("ul",{className:"flex flex-col gap-1 w-full ",children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"text-lg text-slate-700 font-semibold col-span-1",children:"쿠폰 ID"}),e.jsx("p",{className:"text-base text-slate-500 font-semibold col-span-3",children:y(c??0)})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"text-lg text-slate-700 font-semibold col-span-1",children:"쿠폰 관리명"}),e.jsx("p",{className:"text-base text-slate-500 font-semibold col-span-3",children:s})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 absolute bottom-1 right-0",children:[e.jsxs("button",{type:"button",className:"flex items-center gap-2 text-base text-slate-500",onClick:h,children:["자세히",e.jsx("i",{className:`text-base text-slate-500 ${i?"rotate-90":"rotate-0"} transition-transform duration-300`,children:e.jsx(v,{})})]}),e.jsx("button",{type:"button",className:"text-base text-slate-500",onClick:a,children:e.jsx(I,{})})]})]}),e.jsx("div",{className:`${i?"visible h-auto opacity-100 relative":"invisible max-h-0 opacity-0 absolute"}
          overflow-hidden transition-[max-height] duration-300 ease-in-out opacity-transition`,style:{transitionProperty:"opacity, max-height, visibility",transitionDuration:i?"400ms":"300ms"},children:i&&e.jsxs("ul",{className:"px-4 py-4 bg-slate-100",children:[e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 ID"}),e.jsx("p",{className:"text-sm text-slate-500 ",children:y(c??0)})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 관리명"}),e.jsx("p",{className:"text-sm text-slate-500 ",children:s})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 할인"}),e.jsxs("p",{className:"text-sm text-slate-500 ",children:[r,"%"]})]}),e.jsxs("li",{className:"flex justify-between items-center",children:[e.jsx("h5",{className:"text-base text-slate-700 font-semibold",children:"쿠폰 유효기간"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[u(o)," ~ ",u(l)]})]})]})}),e.jsx(P,{open:x,onClose:a,actions:b})]})},K=()=>{const[f]=w(),d=Number(f.get("strfId")),i=A("accessToken"),h=C(),c=()=>{h(`/business/coupon/create?strfId=${d}`)},[s,r]=n.useState([]),[l,o]=n.useState(!1),[m,p]=n.useState(!1),[x,j]=n.useState(0),u=a=>{x===a?p(!m):(j(a),p(!0))},b=async()=>{const a="/api/coupon/business/issuance";o(!0);try{const t=await E.get(a,{headers:{Authorization:`Bearer ${i}`}}),g=t.data;return Array.isArray(g)&&r(g),t.data&&o(!1),g}catch(t){return console.log(t),r([]),o(!1),null}};return n.useEffect(()=>{b()},[]),e.jsxs("div",{children:[e.jsx(T,{}),e.jsxs("section",{className:"px-4 py-3 flex flex-col gap-5",children:[e.jsxs("div",{className:"px-4 py-4 bg-[rgba(165,238,254,0.31)] rounded-lg",children:[e.jsx("p",{className:"text-base font-semibold text-slate-700",children:"쿠폰의 발급을 신청해보세요!"}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:"신청이 승인되어을 때, 쿠폰을 발급 받을 수 있어요."})]}),e.jsx("div",{children:e.jsxs($,{type:"primary",className:"w-full py-2 max-h-[60px] h-[13.33vw] text-xl font-medium",onClick:c,children:[e.jsx(k,{}),"혜택 등록"]})})]}),e.jsx("section",{className:"px-4 py-3 flex flex-col gap-5",children:e.jsx(F,{spinning:l,children:e.jsxs("ul",{className:"flex flex-col gap-5",children:[l&&e.jsx(e.Fragment,{}),!l&&(s==null?void 0:s.length)===0&&e.jsx(Y,{icon:e.jsx(D,{}),content:"쿠폰 목록이 없습니다."}),!l&&(s==null?void 0:s.map((a,t)=>e.jsx("li",{children:e.jsx(L,{strfId:d,item:a,selected:!!(x===t&&m),onClick:()=>u(t)})},t)))]})})})]})};export{K as default};
