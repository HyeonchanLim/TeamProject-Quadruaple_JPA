import{g as L,u as D,r as t,m as h,j as e,Z as _,I as z,$ as M,a0 as F}from"./index-CclgMCKg.js";import{j as m}from"./jwt-Be9xYbvd.js";import{S as K,a as O}from"./swiper-react-BiZMhr8u.js";import{c as W}from"./match-BrbVKEl2.js";/* empty css               */import"./index-317k7Gzh.js";import"./index-efnQCHqG.js";import"./index-DK5P-bAW.js";import"./index-Dyi5F84X.js";const Y=()=>{const n=L("accessToken"),r=D(),g=()=>{r("/")},j=()=>{r(`/search/strf?keyword=${i}&category=0&orderType=0&filter=none`)},[i,N]=t.useState(""),[o,b]=t.useState([]),[l,y]=t.useState([]),[x,k]=t.useState([]),[w,d]=t.useState(!1),[C,p]=t.useState(!1);t.useEffect(()=>{console.log(i)},[i]);const v=t.useRef(null),I=t.useCallback(async()=>{const s="/api/search/popular";try{const a=await h.get(s);b(a.data.data)}catch(a){console.log("인기 검색어",a)}},[]),f=t.useCallback(async()=>{try{const a=(await m.get("/api/search/basic")).data;y(a.data)}catch(s){console.log("최근 본 검색 결과",s)}},[]),S=t.useCallback(async()=>{p(!0);try{const c=(await m.get("/api/search/list")).data.data.filter(E=>E.txt!=="");k(c),p(!1)}catch(s){console.log("최근 검색어 호출 결과:",s),p(!1)}},[]);t.useCallback(async s=>{const a={strf_id:s.strfId};try{const c=await h.patch(`/api/recent/hide?strf_id=${s.strfId}`,{...a},{headers:{Authorization:`Bearer ${n}`}});console.log(c.data),c.data&&f()}catch(c){console.log("개별 삭제",c)}},[]);const $=t.useCallback(async()=>{try{const s=await h.patch("/api/recent/hide/all",{},{headers:{Authorization:`Bearer ${n}`}});console.log(s.data),s.data&&(f(),d(!1))}catch(s){console.log("개별 삭제",s)}},[]),B=t.useCallback(s=>{console.log("클릭한 최근 검색어:",s),r(`/search/strf?keyword=${s.txt}&category=0&orderType=0&filter=none`)},[]),P=t.useCallback(s=>{console.log("클릭한 인기 검색어:",s),r(`/contents/index?strfId=${s.strfId}`)},[]),R=t.useCallback(s=>{console.log("클릭한 최근 본 목록:",s),r(`/contents/index?strfId=${s.strfId}`)},[]),T=t.useCallback(()=>{},[]),A=()=>{d(!1)},u=()=>{j()};return t.useEffect(()=>{I(),n&&(f(),S())},[]),e.jsxs("div",{className:"w-full flex flex-col  mb-[100px]",children:[e.jsxs("section",{className:"w-full px-4 py-6 flex items-center gap-3 relative",ref:v,children:[e.jsx("div",{className:"text-3xl cursor-pointer",onClick:()=>{g()},children:e.jsx(_,{})}),e.jsx("label",{htmlFor:"searchBar",className:"relative w-full",children:e.jsx(z,{id:"searchBar",placeholder:"관광지, 장소, 숙소,맛집을 검색해 보세요",allowClear:!0,onClear:T,suffix:e.jsx("button",{type:"button",onClick:u,children:e.jsx(M,{className:"text-slate-400 text-2xl"})}),onChange:s=>N(s.target.value),onPressEnter:s=>{s.target.value.trim()&&u()},variant:"filled",className:`max-h-[60px] h-[16vw] text-base rounded-lg gap-[5px]\r
            bg-slate-50 hover:bg-slate-100 placeholder:text-slate-400 `})})]}),e.jsxs("section",{className:"flex flex-col gap-8 px-4",children:[n&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-700 select-none",children:"최근 검색어"}),e.jsx("ul",{className:"flex gap-3 flex-wrap",children:C?e.jsxs("div",{className:"flex justify-center items-center gap-5",children:[e.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),e.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),e.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),e.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"}),e.jsx("li",{className:"text-transparent bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",children:"제주"})]}):x?x==null?void 0:x.map((s,a)=>e.jsx("li",{className:"cursor-pointer text-slate-700 bg-slate-50 px-4 py-[6px] rounded-[20px] text-sm select-none",onClick:()=>B(s),children:s.txt},a)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsx("h2",{className:"text-lg  font-semibold text-slate-700 select-none",children:"인기 검색어"}),e.jsx("ul",{className:"flex flex-col gap-[20px] flex-wrap h-[40vw] max-h-[230px]",children:o?o==null?void 0:o.map((s,a)=>e.jsx("li",{className:"cursor-pointer ",onClick:()=>P(s),children:e.jsxs("p",{className:"flex gap-3 items-center select-none",children:[e.jsx("span",{className:"text-slate-700 text-sm font-semibold",children:a+1}),e.jsx("span",{className:"text-slate-700 text-sm",children:s.strfName})]})},a)):e.jsx("li",{className:"text-slate-700 bg-slate-50 px-[20px] py-[10px] rounded-[20px]",children:"데이터 없음"})})]}),n&&e.jsxs("div",{className:"flex flex-col gap-[30px]",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg  font-semibold text-slate-700 select-none",children:"최근 본 상품"}),e.jsx("button",{type:"button",className:"text-slate-400 text-[18px] select-none",onClick:()=>d(!0),children:"모두 삭제"})]}),e.jsx("div",{className:"w-full select-none px-4",children:l&&l.length>0&&e.jsx(K,{slidesPerView:2.5,spaceBetween:12,direction:"horizontal",className:"w-full flex select-none",children:l?l==null?void 0:l.map((s,a)=>e.jsx(O,{className:"w-auto !h-auto shrink-0 select-none",onClick:()=>R(s),children:e.jsxs("div",{className:"flex flex-col gap-[15px] w-full select-none",children:[e.jsx("div",{className:"aspect-square w-full rounded-2xl overflow-hidden",children:e.jsx("img",{className:"w-full h-full object-cover",src:s.strfPic?`${F}/${s.strfId}/${s.strfPic}`:"/images/logo_icon_4.png",alt:s.strfName})}),e.jsxs("div",{className:"flex flex-col gap-[5px] justify-center",children:[e.jsx("div",{className:"text-[18px] text-slate-700 font-semibold",children:s.strfName}),e.jsxs("div",{className:"flex gap-[5px]",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:W(s.category)}),e.jsx("span",{className:"text-slate-500 text-sm",children:"•"}),e.jsx("span",{className:"text-slate-500 text-sm",children:s.locationTitle})]})]})]})},a)):null})})]})]}),w&&e.jsx(CenterModal,{handleClickCancle:A,handleClickSubmit:$,content:"최근 본 목록을 모두 삭제하시겠습니까?"})]})};export{Y as default};
