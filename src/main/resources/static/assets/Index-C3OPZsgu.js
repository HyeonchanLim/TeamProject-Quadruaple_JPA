import{u as S,j as e,ab as $,N as C,Q as I,g as P,ay as n,r,B as E,m as f}from"./index-CclgMCKg.js";import{G as L}from"./index-DLFP4kOL.js";import{a as k}from"./index-DFlVvL3-.js";import{S as A}from"./index-CwwfHYk5.js";import{S as D}from"./index-DzJzb7gE.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-b40CqTdl.js";import"./Portal-cEDniDzA.js";import"./index-Dx4kxOlF.js";import"./useId-C98JHZMn.js";import"./motion-BtiDeT7c.js";import"./PurePanel-C1JE1xpr.js";import"./useLocale-drylJvgs.js";import"./useIcons-Bg9STVks.js";import"./CheckOutlined-C_iRVmUt.js";import"./DownOutlined-eQ1uAPVl.js";const M=({item:s})=>{var o,i;const d=S(),c=()=>{d(`/scheduleboard/scheduleDetail?tripId=${s.tripId}&TripReviewId=${s.tripReviewId}`)};return e.jsxs("div",{className:"flex flex-col gap-4 border-b-8 border-slate-100 px-4 py-6",onClick:c,children:[e.jsxs("section",{className:"flex items-center gap-4 pt-6",children:[e.jsx("div",{className:"w-8 aspect-square rounded-full overflow-hidden bg-slate-200",children:e.jsx("img",{src:`${$}/${s.userId}/${s.profilePic}`,alt:s.profilePic,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-base text-slate-700 font-semibold",children:s.name})]}),e.jsxs("section",{children:[e.jsx("div",{className:"w-full h-[53.33vw] max-h-[350px] bg-slate-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:`${C}/${s.tripReviewId}/${(o=s.tripReviewPics)==null?void 0:o[0]}`,alt:(i=s.tripReviewPics)==null?void 0:i[0],className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"py-4 flex flex-col gap-4",children:[e.jsx("h3",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{className:"text-base text-slate-500 line-clamp-3",children:s.content}),e.jsxs("ul",{className:"flex items-center justify-end gap-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(I,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.recentCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:` text-base ${s.likeUser?"text-secondary3":"text-slate-300"}`,children:e.jsx(L,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.likeCount})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"text-slate-300 text-base",children:e.jsx(k,{})}),e.jsx("p",{className:"text-slate-500 font-semibold text-sm",children:s.scrapCount})]})]})]})]})]})},Z=()=>{const s=P("accessToken"),d=[{label:"최신순",value:n.LATEST},{label:"추천순",value:n.POPULAR}],[c,o]=r.useState([]),[i,j]=r.useState(0),[g,h]=r.useState(!0),[x,b]=r.useState(n.LATEST),[p,v]=r.useState(1),[N,m]=r.useState(!1);console.log(c);const w=async()=>{const t="/api/trip-review/allTripReview";if(m(!0),!s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`)).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),o(u=>[...u,...a.data.reviews])),a}catch(l){console.log("여행기 리스트 조회",l)}finally{m(!1)}if(s)try{const a=(await f.get(`${t}?orderType=${x}&pageNumber=${p}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("여행기 리스트 조회",a),a.code==="200 성공"&&(h(a.data.hasMore),o(u=>[...u,...a.data.reviews])),a}catch(l){console.log("여행기 리스트 조회",l)}finally{m(!1)}},y=async()=>{try{const l=(await f.get("/api/trip-review/allTripReviewCount")).data;return j(l.data),l}catch(t){return console.log("여행기 개수",t),null}},T=t=>{b(t),o([])},R=()=>{v(t=>t+1)};return r.useEffect(()=>{w()},[x,p]),r.useEffect(()=>{y()},[]),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"flex justify-between items-center px-4 py-4 border-b border-t border-slate-100",children:[e.jsxs("p",{className:"font-semibold text-sm text-slate-700",children:["총 ",i==null?void 0:i.toLocaleString(),"건"]}),e.jsx(A,{options:d,defaultValue:n.LATEST,variant:"borderless",className:"text-sm text-slate-700",onChange:t=>T(t)})]}),e.jsxs("section",{children:[e.jsx(D,{spinning:N,children:c.map((t,l)=>e.jsx(M,{item:t},l))}),e.jsx("div",{className:"flex items-center justify-center py-5",children:g&&e.jsx(E,{className:`px-5 py-4 border border-slate-300 \r
        rounded-3xl text-base text-slate-600`,onClick:R,children:"더보기"})})]})]})};export{Z as default};
