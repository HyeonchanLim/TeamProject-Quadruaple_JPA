import{r as t,u,j as e,ab as N,g as h,b as v,m as C}from"./index-CclgMCKg.js";import{N as b}from"./NoData-CVZyKg5f.js";import{S as y}from"./index-DzJzb7gE.js";import"./index-DK5P-bAW.js";const $=({chatList:o})=>{const a=u(),l=s=>{a(`/chatroom?roomId=${s}`)};return console.log(o[0]),e.jsx(e.Fragment,{children:e.jsx("ul",{className:"flex flex-col",children:o.map((s,n)=>e.jsxs("li",{className:"flex items-center justify-between gap-3 px-4 py-4 cursor-pointer",onClick:()=>l(s.roomId),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-2xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:s.pic==="user_profile.png"?"/images/logo_icon_2.png":`${N}/${s.userId}/${s.pic}`,alt:"채팅방 사진",className:`w-full h-full object-cover
                      ${s.pic==="user_profile.png"&&"object-[50%_-70%] scale-110"}`})}),e.jsxs("div",{className:"flex flex-col gap-[5px]",children:[e.jsx("p",{className:"text-lg text-slate-700 font-semibold",children:s.title}),e.jsx("p",{className:"text-base text-slate-500",children:s.latestChat})]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("p",{className:"text-sm text-slate-400",children:s.lastChatTime}),s.unreadChat&&e.jsx("p",{className:"px-3 py-[5px] bg-primary rounded-2xl text-white text-sm",children:s.unreadChat})]})]},n))})})},w=t.memo($),I=()=>{const o=h("accessToken"),a=h("user"),l=a==null?void 0:a.role[0],s=u(),n=()=>{s("/")},[g]=t.useState("전체"),[i,x]=t.useState([]),[d,f]=t.useState(0),[c,m]=t.useState(!1),j=async()=>{m(!0);try{const r=(await C.get(`/api/chat-room?page=${d}&role=${l}`,{headers:{Authorization:`Bearer ${o}`}})).data;return r.code==="200 성공"&&x(r.data),r.data.length===30&&f(d+1),r}catch(p){return console.log("채팅 목록 조회",p),x([]),null}finally{m(!1)}};return t.useEffect(()=>{j()},[]),e.jsxs("div",{className:"max-w-[768px] min-w-xs mx-auto relative min-h-screen ",children:[e.jsx(v,{title:"채팅",icon:"back",onClick:n}),e.jsx("div",{children:e.jsxs(y,{spinning:c,children:[c&&e.jsx(e.Fragment,{}),!c&&i.length>0?e.jsx(w,{category:g,chatList:i}):e.jsx(b,{content:"채팅 목록이 없습니다"})]})})]})};export{I as default};
