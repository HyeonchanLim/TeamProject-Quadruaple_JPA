import{F as N,c as y,u as v,r as p,j as e,bs as Y,a0 as M,d as g,al as h,g as f,M as k,bt as C,B as I,m as u,X as L}from"./index-CclgMCKg.js";import{c as $}from"./customParseFormat--lJaNAof.js";import{D as w}from"./index-C8fV_4ml.js";import{N as B}from"./NoData-CVZyKg5f.js";import{S}from"./index-DzJzb7gE.js";import"./PurePanel-C1JE1xpr.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./Overflow-b40CqTdl.js";import"./useIcons-Bg9STVks.js";import"./CheckOutlined-C_iRVmUt.js";import"./DownOutlined-eQ1uAPVl.js";import"./roundedArrow-S-OOpRVx.js";import"./useLocale-drylJvgs.js";import"./index-DK5P-bAW.js";const b=N({key:"bookingAtom",default:{date:[],bookingList:[]}});g.extend($);const O=({item:s})=>{console.log("item",s);const[t]=y(),r=t.get("strfId"),d=v(),a=()=>{d(`/business/booking/detail?strfId=${r}&bookingId=${s.bookingId}&state=${s.state}`)},[c,o]=p.useState(!1),[n,l]=p.useState(!1),i=x=>{switch(x){case"0":return"결제완료";case"1":return"예약확정";case"2":return"이용완료";case"3":return"취소완료"}},j=x=>{switch(x){case"0":return"bg-[rgba(255,253,204,0.6)] text-[#FFCC00]";case"1":return"bg-[rgba(165,238,254,0.3)] text-primary";case"2":return"bg-slate-100 text-slate-400";case"3":return"bg-[rgba(253,180,161,0.3)] text-secondary3"}},m=(x,D)=>D.diff(x,"day");return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"px-4 py-3 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-start justify-between h-[10vw] max-h-[60px] border-b border-slate-200 ",children:[e.jsx("p",{}),e.jsxs("button",{type:"button",className:"flex gap-1 items-center text-primary",onClick:a,children:[e.jsx("p",{children:"상세보기"}),e.jsx("i",{children:e.jsx(Y,{})})]})]}),e.jsx("section",{className:"flex flex-col gap-5",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:`w-fit flex items-center justify-center px-2 py-1 text-sm font-bold ${j(s.state)}`,children:e.jsx("p",{children:i(s.state)})}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-bold text-slate-700",children:s.title})}),e.jsxs("div",{className:"flex items-start gap-5",children:[e.jsx("div",{className:"w-20 aspect-square rounded-2xl bg-slate-200 overflow-hidden",children:e.jsx("img",{src:`${M}/${r}/${s.picName}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-base text-slate-700",children:`${s.checkInDate} ~ ${s.checkOutDate}`}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[m(g(s.checkInDate,"YYYY-MM-DD dd"),g(s.checkOutDate,"YYYY-MM-DD dd")),"박"," ",m(g(s.checkInDate,"YYYY-MM-DD dd"),g(s.checkOutDate,"YYYY-MM-DD dd"))+1,"일, 체크인 ",s.checkInTime,", 체크아웃 ",s.checkOutTime]}),e.jsxs("p",{className:"text-slate-500 text-sm",children:[s.totalPayment.toLocaleString(),"원"]})]})]})]})})]}),c&&e.jsx(h,{title:"예약 승인",content:"해당 예약을 승인하시겠습니까?",handleClickSubmit:()=>{},handleClickCancle:()=>o(!1)}),n&&e.jsx(h,{title:"예약 취소",content:"해당 예약을 취소하시겠습니까?",handleClickSubmit:()=>{console.log("예약 취소")},handleClickCancle:()=>l(!1)})]})},P=()=>{const s=f("accessToken"),[t,r]=k(b);console.log("bookingData",t);const d=async()=>{var c;const a="/api/business/my-page/booking";try{const n=(await u.get(`${a}?startDate=${t.date[0]}&endDate=${t.date[1]}`,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",n),n&&r({...t,bookingList:n}),n}catch(o){return u.isAxiosError(o)&&(((c=o.response)==null?void 0:c.status)===404?(console.log("404 정보 없음",o.response.data),r({...t,bookingList:[]})):(console.log("예약 목록 확인",o),L.info("날짜 내 검색 결과가 없습니다."))),null}};return e.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"px-5 py-4 flex gap-3 border border-slate-200 rounded-lg items-center",children:[e.jsx("i",{className:"text-3xl text-slate-500",children:e.jsx(C,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"px-3 text-sm text-slate-700",children:"날짜 직접 선택"}),e.jsx(w.RangePicker,{placeholder:["검색필터 시작일","검색필터 종료일"],variant:"borderless",suffixIcon:!1,onChange:a=>{console.log(a),a&&r({...t,date:a.map(c=>c?c.format("YYYY-MM-DD"):"")})}})]})]}),e.jsx(I,{type:"primary",className:"text-xl py-1 max-h-[50px] h-[16vw]",onClick:d,children:"검색하기"})]})},ee=()=>{const s=f("accessToken"),[t,r]=k(b),[d,a]=p.useState(!1),c=async()=>{var n;const o="/api/business/my-page/booking";a(!0);try{const i=(await u.get(o,{headers:{Authorization:`Bearer ${s}`}})).data;return console.log("예약 목록 확인",i),i&&(a(!1),r({...t,bookingList:i})),i}catch(l){return u.isAxiosError(l)&&(a(!1),((n=l.response)==null?void 0:n.status)===404?(console.log("404 정보 없음",l.response.data),r({...t,bookingList:[]})):console.log("예약 목록 확인",l)),null}};return p.useEffect(()=>{c()},[]),e.jsxs("div",{children:[e.jsx(P,{}),e.jsxs(S,{spinning:d,children:[t.bookingList.length===0&&e.jsx(B,{content:"예약이 없습니다"}),t.bookingList.length>0&&t.bookingList.map((o,n)=>e.jsx(O,{item:o},n))]})]})};export{ee as default};
