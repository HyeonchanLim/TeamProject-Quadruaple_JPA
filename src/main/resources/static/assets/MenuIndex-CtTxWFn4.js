import{g as T,u as S,J as q,r as m,j as e,ac as u,a9 as $,af as v,ag as M,a8 as H,ae as J,e as P,c as V,B as F,aD as G}from"./index-DZF_lMwV.js";import{B as K}from"./BottomSheet-DBqcQm8j.js";import{m as Q}from"./menuAtom--AVaUswc.js";import{m as b,a as U}from"./match-DOxPiXvs.js";import{N as W}from"./NoData-DFIY8mSl.js";import{S as X}from"./index-Bv825Ok0.js";import"./proxy-sC5Jceop.js";import"./index-C8yBNrXo.js";import"./index-BDHbZjIV.js";import"./index-DWVMhexM.js";import"./index-CqiZLVFA.js";import"./index-BMyrdrr4.js";const Z=({strfId:a,item:s,category:t,getMenuList:o})=>{const n=T("user").strfDtos[0].busiNum,f=T("accessToken"),l=S(),i=()=>{l(`/business/menu/create?strfId=${a}&category=${t}&menuId=${s.menuId}&what=room`)},p=()=>{l(`/business/menu/edit?strfId=${a}&category=${t}&menuId=${s.menuId}&what=menu`)},r=()=>{l(`/business/menu/edit?strfId=${a}&category=${t}&menuId=${s.menuId}&what=room`)},c=()=>{l(`/business/menu/detail?strfId=${a}&category=${t}&menuId=${s.menuId}`,{state:s})},[x,w]=q(Q),[g,C]=m.useState(!1),[D,h]=m.useState(!1),B=async()=>{const Y="/api/detail/menu";try{const y=(await P.delete(`${Y}?menuId=${s.menuId}&busiNum=${n}`,{headers:{Authorization:`Bearer ${f}`}})).data;y.code==="200 성공"&&(h(!1),o()),console.log("메뉴 삭제",y)}catch(I){console.log("메뉴 삭제",I)}},A=()=>{B()},k=()=>{C(!g)},E=()=>{h(!1)},j=()=>{C(!1),h(!0)},N=()=>{w({...x,menuTitle:s.menuTitle,menuPrice:s.menuPrice,menuPic:{uid:"1",name:s.menuPic,status:"done",url:`${v}/${a}/menu/${s.menuPic}`}}),console.log("url",`${v}/${a}/menu/${s.menuPic}`),p()},O=()=>{r()},R=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),"객실 기본 정보 수정하기"]}),onClick:()=>N()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),"객실 상세 정보 수정하기"]}),onClick:()=>O()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx($,{className:"text-slate-400"}),b(t)," 삭제하기"]}),onClick:()=>j()}],L=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),"객실/호실 등록하기"]}),onClick:()=>i()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),b(t)," 수정하기"]}),onClick:()=>N()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx($,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>j()}],_=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(u,{className:"text-slate-300"}),b(t)," 수정하기"]}),onClick:()=>N()},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx($,{className:"text-slate-400"}),"삭제하기"]}),onClick:()=>j()}],z=()=>t===M.STAY?s.recomCapacity?R:L:_;return e.jsxs("div",{className:"flex items-center gap-2 py-3 select-none",children:[e.jsxs("section",{className:"flex items-center w-full cursor-pointer gap-5",onClick:c,children:[e.jsx("div",{className:"aspect-square w-[21.3vw] max-w-[162px] rounded-lg overflow-hidden bg-slate-200",children:e.jsx("img",{src:`${v}/${a}/menu/${s==null?void 0:s.menuPic}`,alt:s==null?void 0:s.menuTitle,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex flex-col gap-2 items-start",children:[e.jsx("p",{className:"text-xl font-semibold text-slate-700 text-left",children:s==null?void 0:s.menuTitle}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg text-slate-500 font-medium text-left",children:[s==null?void 0:s.menuPrice.toLocaleString(),"원"]}),e.jsx("p",{className:`${!s.recomCapacity&&t===M.STAY?"visible":"invisible"} text-slate-500`,children:"* 예약을 위해 객실을 등록해주세요."})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:k,children:e.jsx(H,{className:"text-3xl text-slate-500"})})}),g&&e.jsx(K,{open:g,onClose:k,actions:z(),title:"더보기"}),D&&e.jsx(J,{title:"객실 삭제",content:"해당 메뉴를 삭제하시겠습니까?",handleClickSubmit:A,handleClickCancle:E})]})},me=()=>{const a=S(),s=()=>{a(`/business/menu/create?strfId=${o}&category=${d}`)},[t]=V(),o=Number(t.get("strfId")),d=t.get("category"),[n,f]=m.useState([]),[l,i]=m.useState(!1),p=async()=>{const r="/api/detail/menu";i(!0);try{const x=(await P.get(`${r}?strf_id=${o}`)).data;return x.data[0]!==null&&f(x.data),i(!1),x}catch(c){return console.log(c),i(!1),null}};return m.useEffect(()=>{p()},[]),e.jsxs("div",{className:"px-4 flex flex-col gap-3 pb-3",children:[e.jsx("section",{className:"flex justify-end",children:e.jsxs(F,{size:"large",onClick:s,className:"text-base font-semibold text-slate-500 px-4 flex items-center gap-3",children:[e.jsx(G,{}),"메뉴 추가"]})}),e.jsx("section",{children:e.jsxs(X,{spinning:l,children:[l&&e.jsx("div",{className:"h-96"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[!l&&n.length>0&&(n==null?void 0:n.map((r,c)=>e.jsx(Z,{item:r,strfId:o,category:d,getMenuList:p},c))),!l&&n.length===0&&e.jsx(W,{icon:U(d),content:"등록된 메뉴가 없습니다"})]})]})})]})};export{me as default};
