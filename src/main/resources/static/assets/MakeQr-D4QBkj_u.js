import{g as h,c as u,r,j as e,B as g,e as j}from"./index-DZF_lMwV.js";import{S as b}from"./index-Bv825Ok0.js";import{T as N}from"./index-dDknAoXQ.js";import"./DownOutlined-CHeJKV1x.js";import"./isMobile-DjGTsQxe.js";const S=()=>{const c=h("accessToken"),[n]=u(),i=n.get("strfId"),[m,a]=r.useState(!1),[l,d]=r.useState(""),[o,x]=r.useState(),p=async()=>{const s="/api/point/QRcode";a(!0);try{const t=await j.get(`${s}?strf_id=${i}&amount=${o}`,{headers:{Authorization:`Bearer ${c}`},responseType:"blob"});if(t.data){const f=URL.createObjectURL(t.data);d(f)}}catch(t){console.log("QR제작 에러:",t)}finally{a(!1)}};return e.jsxs("div",{className:"px-4 flex flex-col items-center",children:[e.jsxs("section",{className:"py-10 flex flex-col gap-2 items-center",children:[e.jsx("h2",{className:"text-2xl text-slate-700 font-semibold",children:"결제를 위한 QR 코드"}),e.jsx("p",{className:"text-slate-500",children:"고객이 포인트로 체크인할 경우, 결제를 위해 발급되는 QR 코드입니다."})]}),e.jsxs("section",{className:"shadow-sm shadow-slate-200 border border-slate-200 rounded-lg flex flex-col items-center gap-8 w-fit overflow-hidden",children:[e.jsx("div",{className:"bg-primary2 h-12 w-full mb-5"}),e.jsx("div",{className:"aspect-square w-56 bg-slate-50 rounded-lg border border-slate-200 overflow-hidden mb-5",children:l?e.jsx("img",{src:l,alt:"QR 코드",className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx(b,{spinning:m})})}),e.jsxs("div",{className:"flex items-center gap-5 px-8 py-8 border-t border-slate-200",children:[e.jsx(N,{placeholder:"결제 금액을 입력하세요.",suffix:e.jsx("p",{className:"text-base pr-4",children:"원"}),onChange:s=>{typeof s=="number"&&x(s)},value:o,className:"w-full max-h-[50px] h-[16vw] pl-8",size:"large",formatter:s=>typeof s=="string"?s.replace(/\B(?=(\d{3})+(?!\d))/g,","):"",parser:s=>s==null?void 0:s.replace(/,/g,"")}),e.jsx(g,{type:"primary",className:"text-lg max-h-[50px] h-[16vw]",onClick:p,children:"발급"})]})]})]})};export{S as default};
