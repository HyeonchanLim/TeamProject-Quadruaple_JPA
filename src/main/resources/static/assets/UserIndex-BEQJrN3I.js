import{J as S,t as A,a1 as P,r as f,g as d,u as E,j as e,a2 as L,a3 as U,a4 as $,Y as R,L as a,a5 as T,a6 as O,a7 as B,S as D,a8 as n,a9 as F,aa as _,Q as z,m as h,k as j,ab as G,ac as H,s as N,R as K}from"./index-CclgMCKg.js";import{a as Q}from"./index-DLFP4kOL.js";import{R as q}from"./index-DN2QkB1Y.js";import{S as J,a as M}from"./swiper-react-BiZMhr8u.js";import{r as V}from"./userSelector-IqkE-rCe.js";import{N as Y}from"./NotificationComponent-Ds3VL63r.js";/* empty css               *//* empty css                   */const le=()=>{var p;const x=S(A);console.log("userInfo",x);const b=P(V),[s,g]=f.useState({name:"",couponCnt:0,profilePic:"",tripList:[]}),[l,u]=f.useState(!1),o=d("accessToken"),c=d("user"),w=async()=>{u(!0);try{const r=(await h.get("/api/home/user",{headers:{Authorization:`Bearer ${o}`}})).data;return g(r.data),r}catch(t){return console.log(t),null}finally{u(!1)}},y=async()=>{const t="/api/chat-room/admin";try{const r=await h.post(t,null,{headers:{Authorization:`Bearer ${o}`}});console.log("관리자 채팅방 생성",r.data);const m=r.data;return m.code==="200 성공"&&v(m.data),m}catch(r){return console.log("관리자 채팅방 생성",r),null}};f.useEffect(()=>{o&&w()},[]);const i=E(),v=t=>{i(`/chatroom?roomId=${t}`)},C=()=>{b(),H("accessToken");const t=d("user");t.isSaveEmail===!1?N("user",{...t,email:""}):N("user",{...t,userId:"",role:[K.GUEST]}),i("/signin")},k=()=>{i("/user/useredit",{state:s})},I=()=>{if((s==null?void 0:s.profilePic)===null)return"/images/user.png";if(x.providerType===j.LOCAL)return`${G}/${c==null?void 0:c.userId}/${s==null?void 0:s.profilePic}`;if(x.providerType===j.KAKAO)return`${s.profilePic}`};return e.jsx("div",{className:" w-full flex justify-end",children:e.jsxs("div",{className:"w-full h-screen bg-white ",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"flex justify-between py-[14px]",children:[e.jsx(L,{onClick:()=>i("/"),className:"text-3xl cursor-pointer text-slate-700"}),e.jsxs("h1",{className:"flex gap-5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{onClick:()=>i("/user/notification"),className:"text-3xl text-slate-700 cursor-pointer"}),e.jsx(Y,{token:o})]}),e.jsx($,{className:"text-3xl text-slate-700 cursor-pointer",onClick:()=>k()})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mt-5",children:[e.jsx("div",{className:"mx-auto w-32 h-32 rounded-full overflow-hidden bg-slate-100",children:!l&&e.jsx("img",{src:I(),alt:"User-Profile",className:"w-full h-full object-cover"})}),e.jsxs("h1",{className:"text-2xl font-bold text-slate-700 mt-[14px] text-center flex items-center justify-center",children:[!l&&s.name,l&&e.jsx("p",{className:"bg-slate-100 text-transparent w-fit rounded-xl",children:"닉네임"})]}),!l&&e.jsx(J,{slidesPerView:1,className:"mySwiper",children:(p=s.tripList)==null?void 0:p.map(t=>e.jsx(M,{children:e.jsxs("div",{className:`flex items-center justify-between bg-slate-100 mt-5 px-4 py-4 rounded-full relative\r
                    after:absolute after:border-solid after:border-transparent after:border-b-slate-100 after:border-x-[16px] after:border-b-[30px] after:-top-4 after:left-1/2 after:-translate-x-1/2`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`${R}/${t.locationPic}`,alt:"",className:"w-8 h-8 rounded-full mr-3"}),e.jsx("span",{className:"text-lg text-slate-700 font-normal",children:t.title})]}),e.jsx("span",{className:"text-lg text-primary font-semibold",children:t.dday>0?`D-${t.dday}`:"여행중"})]})},t.tripId))}),l&&e.jsxs("div",{className:`flex items-center justify-between bg-slate-100 mt-5 px-4 py-4 rounded-full relative\r
                    after:absolute after:border-solid after:border-transparent after:border-b-slate-100 after:border-x-[16px] after:border-b-[30px] after:-top-4 after:left-1/2 after:-translate-x-1/2`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full mr-3 bg-slate-200"}),e.jsx("span",{className:"text-lg text-slate-700 font-normal"})]}),e.jsx("span",{className:"text-lg text-primary font-semibold"})]})]}),e.jsxs("div",{className:"flex my-5",children:[e.jsxs(a,{to:"/user/usertrips",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(T,{className:"w-full text-3xl text-slate-700 mb-2"}),"여행"]}),e.jsxs(a,{to:"/user/userwishlist",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(O,{className:"w-full text-3xl text-slate-700 mb-2"}),"찜하기"]}),e.jsxs(a,{to:"/user/userreview",className:"w-1/4 text-center text-base text-slate-500 font-normal relative after:absolute after:top-1/2 after:-translate-y-1/2 after:right-0 after: after:bg-slate-200 after:w-[1px] after:h-14",children:[e.jsx(B,{className:"w-full text-3xl text-slate-700 mb-2"}),"리뷰"]}),e.jsxs(a,{to:"/user/usertrip",className:"w-1/4 text-center text-base text-slate-500 font-normal",children:[e.jsx(D,{className:"w-full text-3xl text-slate-700 mb-2"}),"내 여행기"]})]})]})]}),e.jsx("p",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("div",{className:"w-full px-4",children:[e.jsxs(a,{to:"/user/userbooking",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(Q,{className:"text-3xl text-slate-400 mr-4"}),"내예약",e.jsx(n,{className:"text-slate-300 ml-auto"})]}),e.jsxs(a,{to:"/user/usercoupon",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(F,{className:"text-3xl text-slate-400 mr-4"}),"쿠폰함",s.couponCnt>0&&e.jsx("span",{className:"ml-auto w-9 h-6 rounded-2xl text-sm text-center leading-[1.45rem] text-primary3 bg-[#A5EEFE]/50",children:s.couponCnt}),e.jsx(n,{className:"text-slate-300 ml-2"})]}),e.jsxs(a,{to:"/user/point",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(_,{className:"text-3xl text-slate-400 mr-4"}),"포인트",e.jsx(n,{className:"text-slate-300 ml-auto"})]}),e.jsxs(a,{to:"/user/recentlist",className:"flex items-center py-5 text-xl text-slate-700 font-normal",children:[e.jsx(z,{className:"text-3xl text-slate-400 mr-4"}),"최근 본 목록",e.jsx(n,{className:"text-slate-300 ml-auto"})]})]}),e.jsx("p",{className:"w-full h-[10px] bg-slate-100"}),e.jsxs("div",{className:"px-4 pb-[130px]",children:[e.jsx(a,{to:"/announcement",className:"flex py-5  text-slate-500 text-sm",children:"공지사항"}),e.jsx(a,{to:"/qna",className:"flex  text-slate-500 py-5 text-sm",children:"FAQ"}),e.jsx("div",{className:"flex text-slate-500 py-5 text-sm cursor-pointer",onClick:y,children:"1:1 문의하기"}),e.jsx(a,{to:"/user/changepw",className:"flex text-slate-500 py-5 text-sm",children:"비밀번호 변경"}),o&&e.jsxs("p",{onClick:()=>C(),className:"flex gap-3 items-center text-slate-500 py-5 text-sm",children:[e.jsx(q,{className:"text-slate-300"}),"로그아웃"]})]})]})})};export{le as default};
