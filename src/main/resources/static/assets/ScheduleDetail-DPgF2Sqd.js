import{g as O,J as _,i as U,M,c as V,u as W,r as o,j as e,N as z,Q as G,S as F,U as J,B as Q,V as q,m as n,W as H}from"./index-CclgMCKg.js";import{G as K}from"./index-DLFP4kOL.js";import{S as X}from"./ScheduleDay-DCAdJqhS.js";import{S as Y,a as Z}from"./swiper-react-BiZMhr8u.js";import{j as ee}from"./jwt-Be9xYbvd.js";import{s as te}from"./scrapAtom-CA00e9Zc.js";import{R as se}from"./index-317k7Gzh.js";import{S}from"./index-DzJzb7gE.js";import"./match-BrbVKEl2.js";import"./index-efnQCHqG.js";import"./index-DK5P-bAW.js";import"./index-Dyi5F84X.js";import"./index-DFlVvL3-.js";import"./tripAtom-5AlrFlyN.js";import"./MarkerClusterer-BX7VY5nJ.js";import"./index-coMdXwgz.js";import"./index-CSlYUxik.js";import"./index-Dx4kxOlF.js";import"./Portal-cEDniDzA.js";import"./useId-C98JHZMn.js";import"./isMobile-DjGTsQxe.js";import"./motion-BtiDeT7c.js";import"./roundedArrow-S-OOpRVx.js";import"./zoom-BWmeO6-E.js";const ke=()=>{var g,j,w,v,y,N,b,R,T;const i=O("accessToken"),{userId:ae}=_(U),[I,D]=M(te),[d]=V(),m=parseInt(d.get("tripId")),l=parseInt(d.get("TripReviewId")),u=W(),$=()=>{u(`/report?category=${H.TRIPREVIEW}&reportTarget=${l}`)},[r,f]=o.useState({}),[p,k]=o.useState({}),[re,ie]=o.useState(!1),[A,h]=o.useState(!1),[C,c]=o.useState(!1),x=async()=>{const s="/api/trip-review/otherTripReview";if(c(!0),i)try{const t=await n.get(`${s}?tripReviewId=${l}`,{headers:{Authorization:`Bearer ${i}`}});console.log("다른 사람 여행기 조회",t.data);const a=t.data;c(!1),f(a.data)}catch(t){c(!1),console.log("다른 사람 여행기 조회",t)}if(!i)try{const t=await n.get(`${s}?tripReviewId=${l}`);console.log("다른 사람 여행기 조회",t.data);const a=t.data;c(!1),f(a.data)}catch(t){c(!1),console.log("다른 사람 여행기 조회",t)}},L=async()=>{h(!0);try{const s=await n.get(`/api/trip?trip_id=${m}&signed=false`);console.log("여행확인하기",s.data);const t=s.data.data;k(t)}catch(s){console.log(s)}finally{h(!1)}},B=async()=>{const s="/api/trip-review/like",t={tripReviewId:l};try{const a=await ee.post(s,t);console.log("여행기 추천",a.data),a.data.code==="200 성공"&&x()}catch(a){console.log("여행기 추천",a)}},P=async()=>{const s={tripReviewId:l},t="/api/trip-review/like";try{const a=await n.delete(`${t}`,{data:s,headers:{Authorization:`Bearer ${i}`}});console.log("여행기 추천 취소",a.data),a.data.code==="200 성공"&&x()}catch(a){console.log("여행기 추천 취소",a)}};return o.useEffect(()=>{x(),L(),D({...I,copyTripId:m,tripReviewId:l})},[]),e.jsxs("div",{children:[e.jsx("section",{className:"flex flex-col px-[32px] py-[30px] gap-[30px]",children:e.jsxs(S,{spinning:C,children:[e.jsx(Y,{slidesPerView:1,spaceBetween:0,loop:!0,className:"mySwiper w-full h-[406px] overflow-hidden",children:r.length>0?(j=(g=r[0])==null?void 0:g.tripReviewPics)==null?void 0:j.map((s,t)=>e.jsx(Z,{className:"max-w-3xl h-[406px] bg-slate-200",children:e.jsx("img",{src:`${z}/${r[0].tripReviewId}/${s}`,alt:"thum",className:"w-full h-full object-cover"})},t)):null}),e.jsx("div",{className:"flex flex-col gap-[10px]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"font-bold text-[36px] text-slate-700",children:(w=r[0])==null?void 0:w.title}),e.jsxs("ul",{className:"flex gap-[10px] items-center",children:[e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(G,{className:"text-slate-300 text-[18px]"}),e.jsx("p",{className:"text-slate-500 font-bold text-[14px]",children:(v=r[0])==null?void 0:v.recentCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center cursor-pointer",children:[e.jsx(K,{className:"text-slate-300 text-[18px] focus:text-secondary3 transition-all duration-300"}),e.jsx("button",{type:"button",className:"text-slate-500 font-bold text-[14px]",children:(y=r[0])==null?void 0:y.likeCount})]}),e.jsxs("li",{className:"flex gap-[5px] items-center",children:[e.jsx(F,{className:"text-slate-300 text-[18px]"}),e.jsxs("p",{className:"text-slate-500 font-bold text-[14px]",children:[" ",(N=r[0])==null?void 0:N.scrapCount]})]})]})]}),e.jsxs("div",{className:"flex gap-[10px]",children:[i&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px]
                   transition-all duration-300
                   ${((b=r[0])==null?void 0:b.likeUser)===1?"text-secondary3 bg-secondary3/10 hover:bg-secondary3/20":"text-slate-500 bg-slate-200 hover:bg-slate-200/85"}`,onClick:()=>{var s;((s=r[0])==null?void 0:s.likeUser)===0?B():P()},children:e.jsx(J,{})})}),i&&e.jsx("button",{type:"button",className:`w-[50px] h-[50px] flex items-center justify-center
                    rounded-full text-[20px] bg-slate-200 text-slate-500
                   transition-all duration-300
                   hover:bg-slate-200/85`,onClick:$,children:e.jsx(se,{})})]})]})}),e.jsx("div",{className:"py-3",children:e.jsx("p",{children:(R=r[0])==null?void 0:R.content})})]})}),e.jsx("section",{children:e.jsx(S,{spinning:A,children:e.jsx("div",{className:"flex flex-col gap-[50px]",children:(T=p==null?void 0:p.days)==null?void 0:T.map((s,t)=>e.jsx(X,{data:s,newTrip:!1,readOnly:!0},t))})})}),e.jsx("div",{className:"px-8 pb-5 mb-[30px]",children:e.jsxs(Q,{type:"primary",variant:"filled",className:"flex gap-[10px] py-[10px] h-auto w-full",onClick:()=>{u("/schedule/days",{state:{from:"/scheduleboard/scheduleDetail"}})},classNames:"bg-slate-100",children:[e.jsx(q,{className:"w-[30px] h-[30px] text-white"}),e.jsx("span",{className:"font-semibold text-[24px] text-white",children:"내 여행에 담기"})]})})]})};export{ke as default};
