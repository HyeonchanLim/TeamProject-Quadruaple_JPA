import{g as v,c as F,u as Y,a as q,r,j as e,ah as h,af as f,aj as H,ae as K,ak as k,al as S,m as N,X as w}from"./index-CclgMCKg.js";import{B as V}from"./BottomSheet-nkPRIX3f.js";import{m as i,c as X}from"./match-BrbVKEl2.js";import{S as _}from"./index-DzJzb7gE.js";import"./proxy-luPhEEJa.js";import"./index-317k7Gzh.js";import"./index-efnQCHqG.js";import"./index-DK5P-bAW.js";import"./index-Dyi5F84X.js";const ce=()=>{const b=v("user").strfDtos[0].busiNum,y=v("accessToken"),[g]=F(),a=g.get("strfId"),s=g.get("category"),l=g.get("menuId"),o=Y(),x=q().state,[D,m]=r.useState(!1),[T,d]=r.useState(!1),[B,u]=r.useState(!1),[t,P]=r.useState(null),[j,$]=r.useState(!1),C=async()=>{const p="/api/detail/parlor";$(!0);try{const n=(await N.get(`${p}?strf_id=${a}&category=${X(s)}`)).data,L=n.data.find(z=>z.menuId===l)??null;return P(L),n}catch(c){return console.log("객실/호실 조회",c),null}finally{$(!1)}},A=async()=>{const p="/api/detail/menu";try{const n=(await N.delete(`${p}?menuId=${l}&busiNum=${b}`,{headers:{Authorization:`Bearer ${y}`}})).data;n.code==="200 성공"&&(d(!1),o(`/business/menu?strfId=${a}&category=${s}`)),console.log("메뉴 삭제",n)}catch(c){console.log("메뉴 삭제",c)}},O=async()=>{const p="/api/detail/parlor";try{const n=(await N.delete(`${p}?menuId=${l}&busiNum=${b}`,{headers:{Authorization:`Bearer ${y}`}})).data;n.code==="200 성공"&&(console.log("객실 삭제",n),u(!1),w.success("객실 상세 정보 삭제가 완료되었습니다."),C())}catch(c){console.log("객실 삭제",c),u(!1),w.error("객실 상세 정보 삭제에 실패했습니다.")}};r.useEffect(()=>{},[t]),r.useEffect(()=>{C()},[]);const I=[{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-slate-300"}),"객실 기본 정보 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"사진, 이름, 가격을 수정"})]}),onClick:()=>{o(`/business/menu/edit?strfId=${a}&category=${s}&menuId=${l}&what=menu`)}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-slate-300"}),"객실/호실 등록하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"* 예약을 위해 필수적으로 객실/호실 등록이 필요합니다."})]}),onClick:()=>{o(`/business/menu/create?strfId=${a}&category=${s}&menuId=${l}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(f,{className:"text-slate-300"}),i(s)," 삭제하기"]}),onClick:()=>{m(!1),d(!0)}}],M=[{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-slate-300"}),"객실 기본 정보 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"사진, 이름, 가격을 수정"})]}),onClick:()=>{o(`/business/menu/edit?strfId=${a}&category=${s}&menuId=${l}&what=menu`)}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-slate-300"}),"객실/호실 수정하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"객실 수량, 추가 금액, 권장 인원, 최대 인원 수정"})]}),onClick:()=>{o(`/business/menu/edit?strfId=${a}&category=${s}&menuId=${l}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"text-slate-300"}),"객실 삭제하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"등록된 해당 객실 정보 모두 삭제"})]}),onClick:()=>{m(!1),d(!0)}},{label:e.jsxs("div",{className:"flex flex-col items-start gap-1 px-4 py-[14px] text-lg text-slate-500",children:[e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"text-slate-300"}),"객실 상세 정보 삭제하기"]}),e.jsx("p",{className:"text-slate-400 text-base px-6",children:"객실 수량, 추가 금액, 권장 인원, 최대 인원 삭제"})]}),onClick:()=>{m(!1),u(!0)}}],R=[{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(h,{className:"text-slate-300"}),i(s)," 수정하기"]}),onClick:()=>{o(`/business/menu/edit?strfId=${a}&category=${s}&menuId=${l}&what=room`,{state:t})}},{label:e.jsxs("div",{className:"flex items-center gap-3 px-4 py-[14px] text-lg text-slate-500",children:[e.jsx(f,{className:"text-slate-400"}),i(s)," 삭제하기"]}),onClick:()=>{m(!1),d(!0)}}],E=()=>s===k.STAY&&t?t.recomCapacity?M:I:t?R:I;return e.jsxs("div",{className:"flex flex-col gap-6 py-3 ",children:[e.jsxs("section",{className:"flex flex-col gap-3 px-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-slate-700 select-none",children:[i(s)," 사진"]}),e.jsx("p",{className:"text-base font-medium text-slate-500 select-none",children:"현재 고객에게 보여지는 객실 사진입니다."})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"max-w-[200px] w-[40vw] aspect-square rounded-lg overflow-hidden bg-slate-100",children:e.jsx("img",{src:`${H}/${a}/menu/${x.menuPic}`,alt:x.menuTitle,className:"w-full h-full object-cover"})})})]}),e.jsx("div",{className:"h-[10px] bg-slate-100"}),e.jsxs("section",{className:"flex flex-col gap-6 px-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-2xl font-semibold text-slate-700 select-none",children:[i(s)," 정보"]}),e.jsx("button",{type:"button",className:"text-slate-500 text-2xl select-none",onClick:()=>m(!0),children:e.jsx(K,{})})]}),e.jsxs("p",{className:"text-base font-medium text-slate-500",children:["현재 등록된 ",i(s)," 정보입니다."]})]}),e.jsx("div",{children:e.jsx(_,{spinning:j,children:e.jsxs("ul",{className:"flex flex-col gap-2",children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsxs("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:[i(s)," 이름"]}),e.jsx("p",{className:"col-span-3 text-base text-slate-500",children:x.menuTitle})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"금액"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.menuPrice.toLocaleString(),"원"]})]}),!j&&t!==null&&e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"객실 수량"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[t==null?void 0:t.roomNum.length,"개"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"추가 금액"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[t==null?void 0:t.surcharge.toLocaleString(),"원"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"권장 인원"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.recomCapacity,"명"]})]}),e.jsxs("li",{className:"grid grid-cols-4 items-center",children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"최대 인원"}),e.jsxs("p",{className:"col-span-3 text-base text-slate-500",children:[x.maxCapacity,"명"]})]})]}),!j&&s===k.STAY&&t===null&&e.jsx(e.Fragment,{children:e.jsxs("li",{children:[e.jsx("h4",{className:"col-span-1 text-lg text-slate-600 font-semibold",children:"객실 상세"}),e.jsx("p",{className:"col-span-3 text-base text-secondary3",children:"예약을 위해 객실 상세 등록이 필요합니다."})]})})]})})})]}),e.jsx(V,{actions:E(),open:D,onClose:()=>m(!1)}),T&&e.jsx(S,{title:"객실 삭제",content:`${i(s)}를 삭제하시겠습니까?`,handleClickSubmit:()=>{A()},handleClickCancle:()=>{d(!1)}}),B&&e.jsx(S,{title:"객실 삭제",content:"객실 상세 정보를 삭제하시겠습니까?",handleClickSubmit:()=>{O()},handleClickCancle:()=>{u(!1)}})]})};export{ce as default};
