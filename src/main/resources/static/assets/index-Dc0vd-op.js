import{r as l,as as S,ch as Fe,B as _,ci as ne,ai as O,E as Me,cj as oe,ck as Re,az as le,D as A,ap as re,ar as w,bN as Be,bL as Le,bO as ze,cl as Ae,q as Z,cm as We,C as se,aO as De,cn as _e,co as Ve,aT as He,cp as qe,cq as Qe,cr as Xe,cs as Ge,y as Ze}from"./index-CclgMCKg.js";import{g as z}from"./motion-BtiDeT7c.js";import{u as ae,D as Ue,p as Ye,a as Je,P as Ke}from"./index-DF8UPMmw.js";import{u as et,p as U,a as tt}from"./context-BaOhzo3B.js";import{S as nt}from"./Skeleton-B7Q4exgZ.js";import{u as V}from"./useLocale-drylJvgs.js";import{w as ot}from"./PurePanel-C1JE1xpr.js";function lt(){const[e,n]=l.useState([]),s=l.useCallback(t=>(n(o=>[].concat(S(o),[t])),()=>{n(o=>o.filter(a=>a!==t))}),[]);return[e,s]}function W(e){return!!(e!=null&&e.then)}const ce=e=>{const{type:n,children:s,prefixCls:t,buttonProps:o,close:a,autoFocus:b,emitEvent:f,isSilent:c,quitOnNullishReturnValue:p,actionFn:r}=e,d=l.useRef(!1),u=l.useRef(null),[C,y]=Fe(!1),m=function(){a==null||a.apply(void 0,arguments)};l.useEffect(()=>{let i=null;return b&&(i=setTimeout(()=>{var x;(x=u.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{i&&clearTimeout(i)}},[]);const g=i=>{W(i)&&(y(!0),i.then(function(){y(!1,!0),m.apply(void 0,arguments),d.current=!1},x=>{if(y(!1,!0),d.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},v=i=>{if(d.current)return;if(d.current=!0,!r){m();return}let x;if(f){if(x=r(i),p&&!W(x)){d.current=!1,m(i);return}}else if(r.length)x=r(a),d.current=!1;else if(x=r(),!W(x)){m();return}g(x)};return l.createElement(_,Object.assign({},ne(n),{onClick:v,loading:C,prefixCls:t},o,{ref:u}),s)},M=O.createContext({}),{Provider:ie}=M,Y=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:s,isSilent:t,mergedOkCancel:o,rootPrefixCls:a,close:b,onCancel:f,onConfirm:c}=l.useContext(M);return o?O.createElement(ce,{isSilent:t,actionFn:f,close:function(){b==null||b.apply(void 0,arguments),c==null||c(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${a}-btn`},s):null},J=()=>{const{autoFocusButton:e,close:n,isSilent:s,okButtonProps:t,rootPrefixCls:o,okTextLocale:a,okType:b,onConfirm:f,onOk:c}=l.useContext(M);return O.createElement(ce,{isSilent:s,type:b||"primary",actionFn:c,close:function(){n==null||n.apply(void 0,arguments),f==null||f(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},a)},rt=()=>Me()&&window.document.documentElement,K=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:s}=l.useContext(M);return O.createElement(_,Object.assign({onClick:s},e),n)},ee=()=>{const{confirmLoading:e,okButtonProps:n,okType:s,okTextLocale:t,onOk:o}=l.useContext(M);return O.createElement(_,Object.assign({},ne(s),{loading:e,onClick:o},n),t)};function ue(e,n){return O.createElement("span",{className:`${e}-close-x`},n||O.createElement(le,{className:`${e}-close-icon`}))}const fe=e=>{const{okText:n,okType:s="primary",cancelText:t,confirmLoading:o,onOk:a,onCancel:b,okButtonProps:f,cancelButtonProps:c,footer:p}=e,[r]=V("Modal",oe()),d=n||(r==null?void 0:r.okText),u=t||(r==null?void 0:r.cancelText),C={confirmLoading:o,okButtonProps:f,cancelButtonProps:c,okTextLocale:d,cancelTextLocale:u,okType:s,onOk:a,onCancel:b},y=O.useMemo(()=>C,S(Object.values(C)));let m;return typeof p=="function"||typeof p>"u"?(m=O.createElement(O.Fragment,null,O.createElement(K,null),O.createElement(ee,null)),typeof p=="function"&&(m=p(m,{OkBtn:ee,CancelBtn:K})),m=O.createElement(ie,{value:y},m)):m=p,O.createElement(Re,{disabled:!1},m)};var st=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};let D;const at=e=>{D={x:e.pageX,y:e.pageY},setTimeout(()=>{D=null},100)};rt()&&document.documentElement.addEventListener("click",at,!0);const de=e=>{var n;const{getPopupContainer:s,getPrefixCls:t,direction:o,modal:a}=l.useContext(A),b=T=>{const{onCancel:E}=e;E==null||E(T)},f=T=>{const{onOk:E}=e;E==null||E(T)},{prefixCls:c,className:p,rootClassName:r,open:d,wrapClassName:u,centered:C,getContainer:y,focusTriggerAfterClose:m=!0,style:g,visible:v,width:i=520,footer:x,classNames:h,styles:j,children:k,loading:F}=e,N=st(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),P=t("modal",c),H=t(),q=re(P),[Pe,Q,Ee]=ae(P,q),$e=w(u,{[`${P}-centered`]:C??(a==null?void 0:a.centered),[`${P}-wrap-rtl`]:o==="rtl"}),je=x!==null&&!F?l.createElement(fe,Object.assign({},e,{onOk:f,onCancel:b})):null,[X,G,Te]=et(U(e),U(a),{closable:!0,closeIcon:l.createElement(le,{className:`${P}-close-icon`}),closeIconRender:T=>ue(P,T)}),we=tt(`.${P}-content`),[Se,Ne]=Be("Modal",N.zIndex),[Ie,B]=l.useMemo(()=>i&&typeof i=="object"?[void 0,i]:[i,void 0],[i]),ke=l.useMemo(()=>{const T={};return B&&Object.keys(B).forEach(E=>{const L=B[E];L!==void 0&&(T[`--${P}-${E}-width`]=typeof L=="number"?`${L}px`:L)}),T},[B]);return Pe(l.createElement(Le,{form:!0,space:!0},l.createElement(ze.Provider,{value:Ne},l.createElement(Ue,Object.assign({width:Ie},N,{zIndex:Se,getContainer:y===void 0?s:y,prefixCls:P,rootClassName:w(Q,r,Ee,q),footer:je,visible:d??v,mousePosition:(n=N.mousePosition)!==null&&n!==void 0?n:D,onClose:b,closable:X&&{disabled:Te,closeIcon:G},closeIcon:G,focusTriggerAfterClose:m,transitionName:z(H,"zoom",e.transitionName),maskTransitionName:z(H,"fade",e.maskTransitionName),className:w(Q,p,a==null?void 0:a.className),style:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.style),g),ke),classNames:Object.assign(Object.assign(Object.assign({},a==null?void 0:a.classNames),h),{wrapper:w($e,h==null?void 0:h.wrapper)}),styles:Object.assign(Object.assign({},a==null?void 0:a.styles),j),panelRef:we}),F?l.createElement(nt,{active:!0,title:!1,paragraph:{rows:4},className:`${P}-body-skeleton`}):k))))},ct=e=>{const{componentCls:n,titleFontSize:s,titleLineHeight:t,modalConfirmIconSize:o,fontSize:a,lineHeight:b,modalTitleHeight:f,fontHeight:c,confirmBodyPadding:p}=e,r=`${n}-confirm`;return{[r]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${r}-body-wrapper`]:Object.assign({},We()),[`&${n} ${n}-body`]:{padding:p},[`${r}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(c).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(f).sub(o).equal()).div(2).equal()}},[`${r}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Z(e.marginSM)})`},[`${e.iconCls} + ${r}-paragraph`]:{maxWidth:`calc(100% - ${Z(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${r}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:s,lineHeight:t},[`${r}-content`]:{color:e.colorText,fontSize:a,lineHeight:b},[`${r}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${r}-error ${r}-body > ${e.iconCls}`]:{color:e.colorError},[`${r}-warning ${r}-body > ${e.iconCls},
        ${r}-confirm ${r}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${r}-info ${r}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${r}-success ${r}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},it=Ae(["Modal","confirm"],e=>{const n=Ye(e);return[ct(n)]},Je,{order:-1e3});var ut=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};function me(e){const{prefixCls:n,icon:s,okText:t,cancelText:o,confirmPrefixCls:a,type:b,okCancel:f,footer:c,locale:p}=e,r=ut(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let d=s;if(!s&&s!==null)switch(b){case"info":d=l.createElement(Qe,null);break;case"success":d=l.createElement(qe,null);break;case"error":d=l.createElement(He,null);break;default:d=l.createElement(Ve,null)}const u=f??b==="confirm",C=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[y]=V("Modal"),m=p||y,g=t||(u?m==null?void 0:m.okText:m==null?void 0:m.justOkText),v=o||(m==null?void 0:m.cancelText),i=Object.assign({autoFocusButton:C,cancelTextLocale:v,okTextLocale:g,mergedOkCancel:u},r),x=l.useMemo(()=>i,S(Object.values(i))),h=l.createElement(l.Fragment,null,l.createElement(Y,null),l.createElement(J,null)),j=e.title!==void 0&&e.title!==null,k=`${a}-body`;return l.createElement("div",{className:`${a}-body-wrapper`},l.createElement("div",{className:w(k,{[`${k}-has-title`]:j})},d,l.createElement("div",{className:`${a}-paragraph`},j&&l.createElement("span",{className:`${a}-title`},e.title),l.createElement("div",{className:`${a}-content`},e.content))),c===void 0||typeof c=="function"?l.createElement(ie,{value:x},l.createElement("div",{className:`${a}-btns`},typeof c=="function"?c(h,{OkBtn:J,CancelBtn:Y}):h)):c,l.createElement(it,{prefixCls:n}))}const ft=e=>{const{close:n,zIndex:s,maskStyle:t,direction:o,prefixCls:a,wrapClassName:b,rootPrefixCls:f,bodyStyle:c,closable:p=!1,onConfirm:r,styles:d}=e,u=`${a}-confirm`,C=e.width||416,y=e.style||{},m=e.mask===void 0?!0:e.mask,g=e.maskClosable===void 0?!1:e.maskClosable,v=w(u,`${u}-${e.type}`,{[`${u}-rtl`]:o==="rtl"},e.className),[,i]=De(),x=l.useMemo(()=>s!==void 0?s:i.zIndexPopupBase+_e,[s,i]);return l.createElement(de,Object.assign({},e,{className:v,wrapClassName:w({[`${u}-centered`]:!!e.centered},b),onCancel:()=>{n==null||n({triggerCancel:!0}),r==null||r(!1)},title:"",footer:null,transitionName:z(f||"","zoom",e.transitionName),maskTransitionName:z(f||"","fade",e.maskTransitionName),mask:m,maskClosable:g,style:y,styles:Object.assign({body:c,mask:t},d),width:C,zIndex:x,closable:p}),l.createElement(me,Object.assign({},e,{confirmPrefixCls:u})))},Ce=e=>{const{rootPrefixCls:n,iconPrefixCls:s,direction:t,theme:o}=e;return l.createElement(se,{prefixCls:n,iconPrefixCls:s,direction:t,theme:o},l.createElement(ft,Object.assign({},e)))},I=[];let ge="";function ve(){return ge}const dt=e=>{var n,s;const{prefixCls:t,getContainer:o,direction:a}=e,b=oe(),f=l.useContext(A),c=ve()||f.getPrefixCls(),p=t||`${c}-modal`;let r=o;return r===!1&&(r=void 0),O.createElement(Ce,Object.assign({},e,{rootPrefixCls:c,prefixCls:p,iconPrefixCls:f.iconPrefixCls,theme:f.theme,direction:a??f.direction,locale:(s=(n=f.locale)===null||n===void 0?void 0:n.Modal)!==null&&s!==void 0?s:b,getContainer:r}))};function R(e){const n=Xe(),s=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:c,open:!0}),o,a;function b(){for(var r,d=arguments.length,u=new Array(d),C=0;C<d;C++)u[C]=arguments[C];if(u.some(g=>g==null?void 0:g.triggerCancel)){var m;(r=e.onCancel)===null||r===void 0||(m=r).call.apply(m,[e,()=>{}].concat(S(u.slice(1))))}for(let g=0;g<I.length;g++)if(I[g]===c){I.splice(g,1);break}a()}function f(r){clearTimeout(o),o=setTimeout(()=>{const d=n.getPrefixCls(void 0,ve()),u=n.getIconPrefixCls(),C=n.getTheme(),y=O.createElement(dt,Object.assign({},r));a=Ge()(O.createElement(se,{prefixCls:d,iconPrefixCls:u,theme:C},n.holderRender?n.holderRender(y):y),s)})}function c(){for(var r=arguments.length,d=new Array(r),u=0;u<r;u++)d[u]=arguments[u];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),b.apply(this,d)}}),t.visible&&delete t.visible,f(t)}function p(r){typeof r=="function"?t=r(t):t=Object.assign(Object.assign({},t),r),f(t)}return f(t),I.push(c),{destroy:c,update:p}}function be(e){return Object.assign(Object.assign({},e),{type:"warning"})}function pe(e){return Object.assign(Object.assign({},e),{type:"info"})}function xe(e){return Object.assign(Object.assign({},e),{type:"success"})}function ye(e){return Object.assign(Object.assign({},e),{type:"error"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function mt(e){let{rootPrefixCls:n}=e;ge=n}var Ct=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const gt=(e,n)=>{var s,{afterClose:t,config:o}=e,a=Ct(e,["afterClose","config"]);const[b,f]=l.useState(!0),[c,p]=l.useState(o),{direction:r,getPrefixCls:d}=l.useContext(A),u=d("modal"),C=d(),y=()=>{var i;t(),(i=c.afterClose)===null||i===void 0||i.call(c)},m=function(){var i;f(!1);for(var x=arguments.length,h=new Array(x),j=0;j<x;j++)h[j]=arguments[j];if(h.some(N=>N==null?void 0:N.triggerCancel)){var F;(i=c.onCancel)===null||i===void 0||(F=i).call.apply(F,[c,()=>{}].concat(S(h.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:m,update:i=>{p(x=>Object.assign(Object.assign({},x),i))}}));const g=(s=c.okCancel)!==null&&s!==void 0?s:c.type==="confirm",[v]=V("Modal",Ze.Modal);return l.createElement(Ce,Object.assign({prefixCls:u,rootPrefixCls:C},c,{close:m,open:b,afterClose:y,okText:c.okText||(g?v==null?void 0:v.okText:v==null?void 0:v.justOkText),direction:c.direction||r,cancelText:c.cancelText||(v==null?void 0:v.cancelText)},a))},vt=l.forwardRef(gt);let te=0;const bt=l.memo(l.forwardRef((e,n)=>{const[s,t]=lt();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,s)}));function pt(){const e=l.useRef(null),[n,s]=l.useState([]);l.useEffect(()=>{n.length&&(S(n).forEach(b=>{b()}),s([]))},[n]);const t=l.useCallback(a=>function(f){var c;te+=1;const p=l.createRef();let r;const d=new Promise(g=>{r=g});let u=!1,C;const y=l.createElement(vt,{key:`modal-${te}`,config:a(f),ref:p,afterClose:()=>{C==null||C()},isSilent:()=>u,onConfirm:g=>{r(g)}});return C=(c=e.current)===null||c===void 0?void 0:c.patchElement(y),C&&I.push(C),{destroy:()=>{function g(){var v;(v=p.current)===null||v===void 0||v.destroy()}p.current?g():s(v=>[].concat(S(v),[g]))},update:g=>{function v(){var i;(i=p.current)===null||i===void 0||i.update(g)}p.current?v():s(i=>[].concat(S(i),[v]))},then:g=>(u=!0,d.then(g))}},[]);return[l.useMemo(()=>({info:t(pe),success:t(xe),error:t(ye),warning:t(be),confirm:t(Oe)}),[]),l.createElement(bt,{key:"modal-holder",ref:e})]}var xt=function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(s[t[o]]=e[t[o]]);return s};const yt=e=>{const{prefixCls:n,className:s,closeIcon:t,closable:o,type:a,title:b,children:f,footer:c}=e,p=xt(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:r}=l.useContext(A),d=r(),u=n||r("modal"),C=re(d),[y,m,g]=ae(u,C),v=`${u}-confirm`;let i={};return a?i={closable:o??!1,title:"",footer:"",children:l.createElement(me,Object.assign({},e,{prefixCls:u,confirmPrefixCls:v,rootPrefixCls:d,content:f}))}:i={closable:o??!0,title:b,footer:c!==null&&l.createElement(fe,Object.assign({},e)),children:f},y(l.createElement(Ke,Object.assign({prefixCls:u,className:w(m,`${u}-pure-panel`,a&&v,a&&`${v}-${a}`,s,g,C)},p,{closeIcon:ue(u,t),closable:o},i)))},Ot=ot(yt);function he(e){return R(be(e))}const $=de;$.useModal=pt;$.info=function(n){return R(pe(n))};$.success=function(n){return R(xe(n))};$.error=function(n){return R(ye(n))};$.warning=he;$.warn=he;$.confirm=function(n){return R(Oe(n))};$.destroyAll=function(){for(;I.length;){const n=I.pop();n&&n()}};$.config=mt;$._InternalPanelDoNotUseOrYouWillBeFired=Ot;export{$ as M};
